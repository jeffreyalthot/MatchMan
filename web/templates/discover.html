{% extends 'base.html' %}
{% block content %}
<div class="card">
  <h2>Espace femme — découverte des profils hommes</h2>
  <p class="small">Statut abonnement: <strong>{% if subscription_active %}Actif{% else %}Inactif{% endif %}</strong></p>
  <form method="get" action="/women/discover">
    <label>Filtrer par ville</label>
    <input type="text" name="city" value="{{ city }}" placeholder="Paris" />
    <button class="btn" type="submit">Rechercher</button>
  </form>
</div>

<div class="grid">
  {% for man in men %}
  <div class="card">
    <h3>{{ man.username }}</h3>
    <p>{{ man.bio }}</p>
    <p class="small">{{ man.city }} — {{ man.region }}</p>
    <p class="small">Goûts: {{ man.tastes }}</p>
    <form method="post" action="/women/match">
      <input type="hidden" name="man_id" value="{{ man.id }}" />
      <input type="hidden" name="woman_id" value="{{ current_user.id }}" />
      <input type="hidden" name="woman_name" value="{{ current_user.username }}" />
      <button class="btn" type="submit">Initier un match</button>
    </form>
  </div>
  {% endfor %}
</div>
{% endblock %}
